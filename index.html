<!doctype html>

<html>

<head>
  <meta charset="utf-8">

  <title>HIV CPS Calculator</title>

  <meta name="description" content="HIV Clonal Prediction Score Web App">
  <meta name="author" content="me">
  <link href="css/custom.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab|Crimson+Text|Cinzel|Cantata+One" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="js/vendor/angular.min.js"></script>

</head>

<body>

  <span ng-app="cpsApp">
  <span ng-controller="cpsCtrl">
   
  <div class="center">
    <div class="f0">Clonal Prediction Score for HIV-1 Sequences</div>
    <i class="subhead">A Tool for Evaluating a Primer Set Against HXB2</i>
    <br>
    <br>
    <!--
    <img src="img/test.300.jpg" alt="image" width="150">
    -->
  </div>

  <br>
  <hr>
  <br>

  <span class="f1"> <!-- f1 font style -->
  Input your primer coordinates:
  <br>
  <br>
  Forward start:
  <input type="number" ng-model="primerobj.forwardStart" min="1"/>
  <br>
  Forward end:
  &nbsp;
  <input type="number" ng-model="primerobj.forwardEnd" min="1"/>
  <br>
  Reverse start:
  <input type="number" ng-model="primerobj.reverseStart" min="1"/>
  <br>
  Reverse end:
  &nbsp;
  <input type="number" ng-model="primerobj.reverseEnd" min="1"/>

  <br>
  <br>

  <button ng-click="submitPrimer()">submit primer</button>

  <br>
  <br>

  <!--
  <div ng-cloak>{{ primerobj | json }}</div>
  -->
  <div ng-cloak class="alert">{{ warning }}</div>

  <br>
  <br>

  <!-- http://stackoverflow.com/questions/14514461/angularjs-how-to-bind-to-list-of-checkbox-values -->
  <label ng-cloak ng-repeat="pcat in pcategories">
    <input type="checkbox" ng-model="pcat.ischecked"/> {{pcat.name}}
    <br>
  </label>

  <!--
  <div ng-cloak>{{ pcategories | json }}</div>
  -->

  <br>
  <br>

  <div ng-if="isLoadingMessage">
    <i class="alert2">{{ isLoadingMessage }}</i>
  </div>
  <!-- output goes here: -->
  <div ng-if="myoutput && !isLoadingMessage">
    Output:

    <br>
    <br>

    <table border="1">
      <tr>
      <b>
      <td>patient</td>
      <td>f_primer</td>
      <td>total</td>
      <td>detectable</td>
      <td>unique</td>
      <td>unique_amp</td>
      <td>%amp</td>
      <td>%det</td>
      </b>
      </tr>

      <tr ng-repeat="(key, val) in myoutput">
      <td>{{key}}</td>
      <td>{{val.f_primer_list[0] | number}}</td>
      <td>{{val.total_list[0] | number}}</td>
      <td>{{val.detectable_list[0] | number}}</td>
      <td>{{val.unique_list[0] | number}}</td>
      <td>{{val.unique_amp_list[0] | number}}</td>
      <td>{{val.p_amp_list[0] | number}}</td>
      <td>{{val.p_det_list[0] | number}}</td>
      </tr>
    </table>
  </div>

  </span> <!-- f1 font style -->

  <br>
  <hr>
  <br>

  <div class="f2">
    <b>If you use the CPS Calculator, please cite the following article:</b>

    <br>
    <br>

    Sarah et al.
    <br>
    <a>Optimization of PCR Strategies to Predict Clonality of Full-Length HIV-1 Sequences</a>.

    <br>
    <br>

    <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>
    <br>
    <small>
    <span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/InteractiveResource" property="dct:title" rel="dct:type">CPS Calculator</span> by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName">...</span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
    </small>

  </div>

  </span> <!-- cpsCtrl -->
  </span> <!-- cpsApp -->

  <script type="text/javascript" src="js/custom/cpsangular.js"></script>
  <script type="text/javascript" src="js/custom/cpscalculator.js"></script>

</body>

</html>
